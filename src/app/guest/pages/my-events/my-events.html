<div class="my-events-container">
  <!-- Invited Events -->
  <section>
    <h2>Event Invitations</h2>
    <div *ngIf="invitedEvents.length; else noInvites">
      <div class="event-card" *ngFor="let event of invitedEvents">
        <h4>{{ event.name }}</h4>
        <p>{{ event.description }}</p>
        <p><strong>Location:</strong> {{ event.location }}</p>
        <p><strong>Date:</strong> {{ event.startDate }} → {{ event.endDate }}</p>
        <div class="buttons">
          <button class="btn btn-success" (click)="acceptInvitation(event.id)">Accept</button>
          <button class="btn btn-danger" (click)="declineInvitation(event.id)">Decline</button>
        </div>
      </div>
    </div>
    <ng-template #noInvites>
      <p class="empty-msg">No event invitations found.</p>
    </ng-template>
  </section>

  <hr />

  <!-- Attended Events -->
  <section>
    <h2>My Attended Events</h2>
    <div *ngFor="let event of attendedEvents" class="card my-3 p-3 shadow-sm">
  <h4>{{ event.name }}</h4>
  <p><strong>Status:</strong> {{ event.status }}</p>

  <div *ngIf="event.status === 'Completed'; else notCompleted">
    <textarea
      class="form-control my-2"
      [(ngModel)]="feedbackText[event.id]"
      placeholder="Leave your feedback"
    ></textarea>

    <input
      type="number"
      class="form-control my-2"
      [(ngModel)]="feedbackRating[event.id]"
      min="1"
      max="5"
      placeholder="Rating (1–5)"
    />

    <button class="btn btn-success" (click)="submitFeedback(event.id)">
      Submit Feedback
    </button>
  </div>

  <ng-template #notCompleted>
    <p class="text-muted fst-italic">Feedback will be available after event completion.</p>
  </ng-template>
</div>

    <ng-template #noAttended>
      <p class="empty-msg">You haven't attended any events yet.</p>
    </ng-template>
  </section>
</div>
